
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="robots" content="noindex, nofollow">
    <meta name="googlebot" content="noindex, nofollow">

    <meta name="viewport" content="width=device-width, target-densitydpi=medium-dpi" />
    <link rel="stylesheet" href="/css/jquery.mobile-1.4.5.min.css">
    <style type="text/css">
    .ui-bar {
    padding :5px 0px 5px 0px !important;
    margin :5px 0px 5px 0px !important;
    }

    .error {
    color:red;
    }

    ​.ui-page .ui-content .ui-listview .ui-li-desc {
    white-space : normal;
    }​
    </style>

    <script src="/js/jquery-3.1.0.min.js"></script> 
    <script src="/js/jquery-migrate-3.0.0.min.js"></script>

    <script src="/js/jquery.validate.min.js"></script>
    <script src="/js/additional-methods.min.js"></script>

    <script type="text/javascript" src="/js/jquery.mobile-1.4.5.min.js"></script>

    <script type='text/javascript'>

function pokeSubmit(){
    var param = document.getElementById("pokeInput").value;
    var pokeURL = "http://pokeapi.co/api/v1/pokemon/" + param;
    var pokeURL2 = "http://pokeapi.co/api/v2/pokemon/" + param;

    $.getJSON(pokeURL, function(data){
        //console.log(data);
        var pokeID = data.national_id;
        var pokeName = data.name;
        var pokeType1 = data.types[0].name;
        if (data.types.length == 2) {
            var pokeType2 = data.types[1].name;
        }
        else var pokeType2 = null;
        var descriptionURI = "http://pokeapi.co" + data.descriptions[0].resource_uri;
        var pokeDescription = "";

        $.getJSON(descriptionURI, function(data2){
            //console.log(data2);
            pokeDescription = data2.description;
        });

        $.getJSON(pokeURL2, function(data3){
            //console.log(data3);

             //console.log(JSON.stringify(data, null, "  "));
            var imageURI = data3.sprites.front_default;

            console.log("Number: ", pokeID);
            console.log("Name: ", pokeName);
            console.log("Type 1: ", pokeType1);
            console.log("Type 2: ", pokeType2);
            console.log("Description URI: ", descriptionURI);
            console.log("Description: ", pokeDescription);
            console.log("Image URI: ", imageURI);

            var li = "";
            li += '<li><img src="' + imageURI + '">';
            li += '<h1>#' + pokeID + ' ' + pokeName + '</h1>';
            li += '<p>Type 1: ' + pokeType1 + '</p>';

            if (pokeType2 != null){
                li += '<p>Type 2: ' + pokeType2 + '</p>';
            }

            li += '<p>' + pokeDescription + '</p>';
            li += '</li>';

            $("#pokeDetails").empty();
            $("#pokeDetails").append(li).promise().done(function(){
                    $(this).listview("refresh");
                });
        });

        
    });
}





function resetForm() {
    $('#locForm')[0].reset();
    //$('#locform').validate().resetForm();
    $("label.error").hide();
  $(".error").removeClass("error");
}

// toast-like notification
// https://gist.github.com/kamranzafar/3136584
function toast(message) {
    var $toast = $('<div class="ui-loader ui-overlay-shadow ui-body-e ui-corner-all"><h3>' + message + '</h3></div>');

    $toast.css({
        display: 'block', 
        background: '#fff',
        opacity: 0.90, 
        position: 'fixed',
        padding: '7px',
        'text-align': 'center',
        width: '270px',
        left: ($(window).width() - 284) / 2,
        top: $(window).height() / 2 - 20
    });

    var removeToast = function(){
        $(this).remove();
    };

    $toast.click(removeToast);

    $toast.appendTo($.mobile.pageContainer).delay(2000);
    $toast.fadeOut(400, removeToast);
}
    </script>


  <title>CS496 by Dennis Tat</title>
  
</head>

<body>

<!-- app search page-->
<div data-role="page" id="pokeSearch-page">
    <div data-role="header" data-theme="b">
         <h1>Pokeapi</h1>
    </div>
    <div data-role="main" class="ui-content">
    <form id="pokeForm" action="#pokeDetails-page" method="post">
        <div>
        <label for="pokeInput">Pokemon name or number:</label>
        <input type="text" name="pokeInput" id="pokeInput" placeholder="Name/Number" value="" required pattern=".*\S+.*">

        </div>
        <br>
        <div>
        <a class="ui-btn" onclick="pokeSubmit();">Search</a>
        </div>
    </form>
    <div>
    <ul data-role="listview" data-inset="true" id="pokeDetails">
    </ul>
    </div>
    </div>
</div>



</body>

    

</html>

